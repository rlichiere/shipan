{% extends 'frontoffice/base.html' %}

{% load i18n %}
{% load staticfiles %}

{% block title %}Home{% endblock %}

{% block page-body %}

<style>

   /* Boostrap custom extensions */
   .btn-love {
      background-color: #faf8f8;
      border-color: hotpink;
   }
   .btn-love > span {
      color: hotpink;
   }
   .btn-love:hover {
      background-color: lightpink;
      border-color: red;
   }
   .btn-love:hover > span {
      color: red;
   }

   /* ProductModel styles */
   .product-picture-thumb {
      min-width: 130px;
      max-width: 130px;

      min-height: 130px;
      max-height: 130px;

      background-size: cover;
      background-position: center;
      border-radius: 0;
   }
   .product-picture-image {
      width: 480px;
      max-height: 630px;
   }
   .product-detail > h4,
   .product-detail > span,
   .product-detail > div {
      margin-bottom: 1rem; /* corresponds to the size `X-3`, as defined by bootstrap 4 */
      margin-top: 1rem; /* corresponds to the size `X-3`, as defined by bootstrap 4 */
   }

</style>

<div class="row mx-auto mb-3 py-0">

   <div class="affix">
      {% for colouring in product.colourings.all %}
         {% if color %}
            {% if colouring.color.name == color %}
               {% for picture in colouring.pictures.all %}
                  <a href="{% url 'fo-product' %}?model={{ product.name }}&color={{ colouring.color.name }}&picture={{ picture.picture }}">
                  <div class="list-group-item product-picture-thumb rounded-0"
                       style="background-image: url('{% url 'media' path='products/'|add:picture.picture %}')"></div>
                  </a>
               {% endfor %}
            {% endif %}
         {% else %}
            {% for picture in product.colourings.first.pictures.all %}
               {% if colouring == picture.colouring %}
               <a href="{% url 'fo-product' %}?model={{ product.name }}&color={{ product.colourings.first.color.name }}&picture={{ picture.picture }}">
               <div class="list-group-item product-picture-thumb"
                    style="background-image: url('{% url 'media' path='products/'|add:picture.picture %}')"></div>
               </a>
               {% endif %}
            {% endfor %}
         {% endif %}
      {% endfor %}
   </div>

   <div class="affix">
      <a class="btn" id="ProductPictureImage_btn">
      {% if color %}
         {% if color in product.getColouringsColorNames %}
            {% for colouring in product.colourings.all %}
               {% if colouring.color.name == color %}
                  {% if selected_picture %}
                     {% for picture in colouring.pictures.all %}
                        {% if selected_picture == picture.picture %}
                           <img src="{% url 'media' path='products/'|add:picture.picture %}" class="product-picture-image">
                        {% endif %}
                     {% endfor %}
                  {% else %}
                     <img src="{% url 'media' path='products/'|add:colouring.pictures.first.picture %}" class="btn product-picture-image">
                  {% endif %}
               {% endif %}
            {% endfor %}
         {% endif %}
      {% else %}
         <img src="{% url 'media' path='products/'|add:product.colourings.first.pictures.first.picture %}" class="btn product-picture-image">
      {% endif %}
      </a>
   </div>

   <div class="product-detail">
      <h4 class="text-body">{{ product.label }}</h4>
      <span class="text-dark">{{ product.description }}</span>

      <div>
         <span class="text-secondary">{% trans 'PRODUCT_DETAIL_COLOR' %}</span>
         <div class="btn-group">
            {% for colouring in product.colourings.all %}
               <style>
                  .btn-outline-custom-{{ colouring.color.rgb }} {
                     background-color: {{ colouring.color.rgb_s }};
                     border-radius: 0;
                     width: 55px;
                     {% if colouring.color.name == color %}
                     border: #BF1F2F outset;
                     {% else %}
                     {% endif %}
                  }
               </style>
               <a href="{% url 'fo-product' %}?model={{ product.name }}&color={{ colouring.color.name }}"
                  class="btn btn-outline-custom-{{ colouring.color.rgb }}"
               >&nbsp;</a>
            {% endfor %}
         </div>
      </div>

      <div>
         <span class="text-secondary mr-2">{% trans 'PRODUCT_DETAIL_SIZE' %}</span>
         <div class="btn-group">
            {% for product_size in product.sizes.all %}
               <a href="#"
                  class="btn btn-outline-primary {% ifequal product_size.name size.name %}active{% endifequal %}"
                  style="border-radius: 0; width: 55px">
                  <span class="text-dark">{{ product_size.label }}</span>
               </a>
            {% endfor %}
         </div>
      </div>

{#               <div class="float-right">#}
{#                  <span class="text-secondary">Categories</span>#}
{#                  <div class="list-group list-group-horizontal mb-3">#}
{#                     {% for category in product.categories.all %}#}
{#                        {% if forloop.counter > 1 %}, {% endif %}#}
{#                        <a href="{% url 'fo-shop' %}?categories={{ category.name }}" class="badge badge-secondary">{{ category.label }}</a>#}
{#                     {% endfor %}#}
{#                  </div>#}
{#               </div>#}

      <div class="pt-4">
         <span class="text-info display-5">{{ product.price_justified }} &euro;</span>
      </div>

      <div class="pt-1">
         <p>
            <a href="#" class="btn btn-info"><span class="fas fa-shopping-basket"></span> {% trans 'BUY_NOW_BUTTON' %}</a>
            <a href="#" class="btn btn-primary"><span class="fas fa-cart-arrow-down"></span> {% trans 'ADD_TO_CART_BUTTON' %}</a>
            <a href="#" class="btn btn-light btn-love"><span class="far fa-heart"></span></a>
         </p>
      </div>
   </div>

</div>

{% endblock %}

{% block extra_script %}
<script>
   $(document).ready(function() {

      $('#ProductPictureImage_btn').zoomify();

   });
</script>
{% endblock %}
